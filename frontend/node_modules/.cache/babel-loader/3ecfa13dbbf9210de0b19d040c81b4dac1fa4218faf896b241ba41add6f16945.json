{"ast":null,"code":"var _jsxFileName = \"D:\\\\secure-vote\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [voterId, setVoterId] = useState('');\n  const [message, setMessage] = useState('');\n  const [showCamera, setShowCamera] = useState(false);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  useEffect(() => {\n    if (showCamera) {\n      navigator.mediaDevices.getUserMedia({\n        video: true\n      }).then(stream => {\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n          console.log(\"üì∑ Camera started\");\n        }\n      }).catch(err => {\n        console.error(\"üö´ Camera error:\", err);\n        setMessage(\"Camera access denied.\");\n      });\n    }\n  }, [showCamera]);\n  const checkVoterId = async () => {\n    setMessage('Checking Voter ID...');\n    try {\n      const res = await fetch('http://localhost:5000/check_id', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          voter_id: voterId\n        })\n      });\n      const data = await res.json();\n      setMessage(data.message);\n      if (data.valid) setShowCamera(true);\n    } catch (err) {\n      console.error(\"‚ùå check_id error\", err);\n      setMessage('Failed to check ID.');\n    }\n  };\n  const captureAndVerify = async () => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    const video = videoRef.current;\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    context.drawImage(video, 0, 0);\n    canvas.toBlob(async blob => {\n      if (!blob) {\n        setMessage(\"Failed to capture image.\");\n        return;\n      }\n      const formData = new FormData();\n      formData.append('voter_id', voterId);\n      formData.append('photo', blob, `${voterId}_capture.jpg`);\n      try {\n        const res = await fetch('http://localhost:5000/verify_face', {\n          method: 'POST',\n          body: formData\n        });\n        const data = await res.json();\n        setMessage(data.message);\n      } catch (err) {\n        console.error(\"‚ùå verify_face error\", err);\n        setMessage('Failed to verify face.');\n      }\n    }, 'image/jpeg');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"\\uD83D\\uDDF3\\uFE0F E-Voting System\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Enter Voter ID\",\n      value: voterId,\n      onChange: e => setVoterId(e.target.value),\n      className: \"border p-2 rounded w-64 mb-4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: checkVoterId,\n      className: \"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded\",\n      children: \"Check ID\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-4 text-center text-sm text-gray-700\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), showCamera && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        autoPlay: true,\n        playsInline: true,\n        className: \"w-80 rounded shadow-md mb-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        className: \"hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: captureAndVerify,\n        className: \"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded\",\n        children: \"Capture & Verify Face\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"rIgTlTILI03lSiT1KaIk/6HZrRc=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","App","_s","voterId","setVoterId","message","setMessage","showCamera","setShowCamera","videoRef","canvasRef","navigator","mediaDevices","getUserMedia","video","then","stream","current","srcObject","console","log","catch","err","error","checkVoterId","res","fetch","method","headers","body","JSON","stringify","voter_id","data","json","valid","captureAndVerify","canvas","context","getContext","width","videoWidth","height","videoHeight","drawImage","toBlob","blob","formData","FormData","append","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","ref","autoPlay","playsInline","_c","$RefreshReg$"],"sources":["D:/secure-vote/frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\n\nfunction App() {\n  const [voterId, setVoterId] = useState('');\n  const [message, setMessage] = useState('');\n  const [showCamera, setShowCamera] = useState(false);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    if (showCamera) {\n      navigator.mediaDevices.getUserMedia({ video: true })\n        .then((stream) => {\n          if (videoRef.current) {\n            videoRef.current.srcObject = stream;\n            console.log(\"üì∑ Camera started\");\n          }\n        })\n        .catch((err) => {\n          console.error(\"üö´ Camera error:\", err);\n          setMessage(\"Camera access denied.\");\n        });\n    }\n  }, [showCamera]);\n\n  const checkVoterId = async () => {\n    setMessage('Checking Voter ID...');\n    try {\n      const res = await fetch('http://localhost:5000/check_id', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ voter_id: voterId }),\n      });\n      const data = await res.json();\n      setMessage(data.message);\n      if (data.valid) setShowCamera(true);\n    } catch (err) {\n      console.error(\"‚ùå check_id error\", err);\n      setMessage('Failed to check ID.');\n    }\n  };\n\n  const captureAndVerify = async () => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    const video = videoRef.current;\n\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    context.drawImage(video, 0, 0);\n\n    canvas.toBlob(async (blob) => {\n      if (!blob) {\n        setMessage(\"Failed to capture image.\");\n        return;\n      }\n\n      const formData = new FormData();\n      formData.append('voter_id', voterId);\n      formData.append('photo', blob, `${voterId}_capture.jpg`);\n\n      try {\n        const res = await fetch('http://localhost:5000/verify_face', {\n          method: 'POST',\n          body: formData,\n        });\n        const data = await res.json();\n        setMessage(data.message);\n      } catch (err) {\n        console.error(\"‚ùå verify_face error\", err);\n        setMessage('Failed to verify face.');\n      }\n    }, 'image/jpeg');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">üó≥Ô∏è E-Voting System</h1>\n\n      <input\n        type=\"text\"\n        placeholder=\"Enter Voter ID\"\n        value={voterId}\n        onChange={(e) => setVoterId(e.target.value)}\n        className=\"border p-2 rounded w-64 mb-4\"\n      />\n      <button\n        onClick={checkVoterId}\n        className=\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded\"\n      >\n        Check ID\n      </button>\n\n      <p className=\"mt-4 text-center text-sm text-gray-700\">{message}</p>\n\n      {showCamera && (\n        <div className=\"mt-6 text-center\">\n          <video\n            ref={videoRef}\n            autoPlay\n            playsInline\n            className=\"w-80 rounded shadow-md mb-4\"\n          />\n          <canvas ref={canvasRef} className=\"hidden\" />\n          <br />\n          <button\n            onClick={captureAndVerify}\n            className=\"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded\"\n          >\n            Capture & Verify Face\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}