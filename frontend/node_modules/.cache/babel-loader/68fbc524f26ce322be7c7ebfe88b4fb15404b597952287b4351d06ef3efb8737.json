{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[voterId,setVoterId]=useState('');const[message,setMessage]=useState('');const[showCamera,setShowCamera]=useState(false);const videoRef=useRef(null);const canvasRef=useRef(null);useEffect(()=>{if(showCamera){navigator.mediaDevices.getUserMedia({video:true}).then(stream=>{if(videoRef.current){videoRef.current.srcObject=stream;console.log(\"üì∑ Camera started\");}}).catch(err=>{console.error(\"üö´ Camera error:\",err);setMessage(\"Camera access denied.\");});}},[showCamera]);const checkVoterId=async()=>{setMessage('Checking Voter ID...');try{const res=await fetch('http://localhost:5000/check_id',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({voter_id:voterId})});const data=await res.json();setMessage(data.message);if(data.valid)setShowCamera(true);}catch(err){console.error(\"‚ùå check_id error\",err);setMessage('Failed to check ID.');}};const captureAndVerify=async()=>{const canvas=canvasRef.current;const context=canvas.getContext('2d');const video=videoRef.current;canvas.width=video.videoWidth;canvas.height=video.videoHeight;context.drawImage(video,0,0);canvas.toBlob(async blob=>{if(!blob){setMessage(\"Failed to capture image.\");return;}const formData=new FormData();formData.append('voter_id',voterId);formData.append('photo',blob,`${voterId}_capture.jpg`);try{const res=await fetch('http://localhost:5000/verify_face',{method:'POST',body:formData});const data=await res.json();setMessage(data.message);}catch(err){console.error(\"‚ùå verify_face error\",err);setMessage('Failed to verify face.');}},'image/jpeg');};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:\"\\uD83D\\uDDF3\\uFE0F E-Voting System\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Voter ID\",value:voterId,onChange:e=>setVoterId(e.target.value),className:\"border p-2 rounded w-64 mb-4\"}),/*#__PURE__*/_jsx(\"button\",{onClick:checkVoterId,className:\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded\",children:\"Check ID\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-center text-sm text-gray-700\",children:message}),showCamera&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 text-center\",children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,playsInline:true,className:\"w-80 rounded shadow-md mb-4\"}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,className:\"hidden\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:captureAndVerify,className:\"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded\",children:\"Capture & Verify Face\"})]})]});}export default App;","map":{"version":3,"names":["React","useState","useRef","useEffect","jsx","_jsx","jsxs","_jsxs","App","voterId","setVoterId","message","setMessage","showCamera","setShowCamera","videoRef","canvasRef","navigator","mediaDevices","getUserMedia","video","then","stream","current","srcObject","console","log","catch","err","error","checkVoterId","res","fetch","method","headers","body","JSON","stringify","voter_id","data","json","valid","captureAndVerify","canvas","context","getContext","width","videoWidth","height","videoHeight","drawImage","toBlob","blob","formData","FormData","append","className","children","type","placeholder","value","onChange","e","target","onClick","ref","autoPlay","playsInline"],"sources":["D:/secure-vote_v2/frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\n\nfunction App() {\n  const [voterId, setVoterId] = useState('');\n  const [message, setMessage] = useState('');\n  const [showCamera, setShowCamera] = useState(false);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    if (showCamera) {\n      navigator.mediaDevices.getUserMedia({ video: true })\n        .then((stream) => {\n          if (videoRef.current) {\n            videoRef.current.srcObject = stream;\n            console.log(\"üì∑ Camera started\");\n          }\n        })\n        .catch((err) => {\n          console.error(\"üö´ Camera error:\", err);\n          setMessage(\"Camera access denied.\");\n        });\n    }\n  }, [showCamera]);\n\n  const checkVoterId = async () => {\n    setMessage('Checking Voter ID...');\n    try {\n      const res = await fetch('http://localhost:5000/check_id', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ voter_id: voterId }),\n      });\n      const data = await res.json();\n      setMessage(data.message);\n      if (data.valid) setShowCamera(true);\n    } catch (err) {\n      console.error(\"‚ùå check_id error\", err);\n      setMessage('Failed to check ID.');\n    }\n  };\n\n  const captureAndVerify = async () => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    const video = videoRef.current;\n\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    context.drawImage(video, 0, 0);\n\n    canvas.toBlob(async (blob) => {\n      if (!blob) {\n        setMessage(\"Failed to capture image.\");\n        return;\n      }\n\n      const formData = new FormData();\n      formData.append('voter_id', voterId);\n      formData.append('photo', blob, `${voterId}_capture.jpg`);\n\n      try {\n        const res = await fetch('http://localhost:5000/verify_face', {\n          method: 'POST',\n          body: formData,\n        });\n        const data = await res.json();\n        setMessage(data.message);\n      } catch (err) {\n        console.error(\"‚ùå verify_face error\", err);\n        setMessage('Failed to verify face.');\n      }\n    }, 'image/jpeg');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">üó≥Ô∏è E-Voting System</h1>\n\n      <input\n        type=\"text\"\n        placeholder=\"Enter Voter ID\"\n        value={voterId}\n        onChange={(e) => setVoterId(e.target.value)}\n        className=\"border p-2 rounded w-64 mb-4\"\n      />\n      <button\n        onClick={checkVoterId}\n        className=\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded\"\n      >\n        Check ID\n      </button>\n\n      <p className=\"mt-4 text-center text-sm text-gray-700\">{message}</p>\n\n      {showCamera && (\n        <div className=\"mt-6 text-center\">\n          <video\n            ref={videoRef}\n            autoPlay\n            playsInline\n            className=\"w-80 rounded shadow-md mb-4\"\n          />\n          <canvas ref={canvasRef} className=\"hidden\" />\n          <br />\n          <button\n            onClick={captureAndVerify}\n            className=\"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded\"\n          >\n            Capture & Verify Face\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}